<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Location-based AR</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
</head>
<body>
    <a-scene embedded arjs="sourceType: webcam;">

        <!-- AR entity representing the object -->
        <a-entity id="ar-entity" gps-entity-place>
            <!-- Your 3D model or object -->
            <a-ring position="0 0.5 0" radius-inner="0.5" radius-outer="0.7" material="color: #4CC3D9;"></a-ring>
        </a-entity>

        <!-- Camera for AR experience -->
        <a-entity camera gps-camera></a-entity>

        <script>
            document.addEventListener('DOMContentLoaded', function () {
                // Get AR entity
                const arEntity = document.getElementById('ar-entity');

                // Update the AR entity position and scale based on user's geolocation
                navigator.geolocation.getCurrentPosition(position => {
                    const userLatitude = position.coords.latitude;
                    const userLongitude = position.coords.longitude;

                    // Set the distance and scale values (adjust these according to your needs)
                    const distance = 1; // in meters
                    const scale = 1.0; // scale factor

                    // Calculate new position based on distance and user's location
                    const newPosition = calculateNewPosition(userLatitude, userLongitude, distance);

                    // Update AR entity position and scale
                    arEntity.setAttribute('position', `${newPosition.x} ${newPosition.y} ${newPosition.z}`);
                    arEntity.setAttribute('scale', `${scale} ${scale} ${scale}`);
                });

                // Helper function to calculate new position based on distance and user's location
                function calculateNewPosition(latitude, longitude, distance) {
                    // Convert distance to degrees (approximately)
                    const distanceInDegrees = distance / (111.32 * 1000);

                    // Calculate new latitude and longitude
                    const newLatitude = latitude + distanceInDegrees;
                    const newLongitude = longitude;

                    // Convert latitude and longitude to Cartesian coordinates
                    const position = {
                        x: distance * Math.sin(newLatitude),
                        y: 0,
                        z: distance * Math.cos(newLatitude) * Math.sin(newLongitude)
                    };

                    return position;
                }
            });
        </script>
    </a-scene>
</body>
</html>
